{% assign sidebar = site.data.sidebars[page.sidebar].entries %}


<ul id="mysidebar" class="nav">
    {% if page.url == "/index.html" %}
    <li class="active"><a href="/"><div class="homelink"><span class="fa fa-home fa-lg ">&nbsp;</span></div></a></li>
    {% else %}
    <li><a href="/"><div class="homelink"><span class="fa fa-home fa-lg ">&nbsp;</span></div></a></li>
    {% endif %}
    
    {% for entry in sidebar %}
        {% for folder in entry.folders %}
              <li><a title="{{folder.title}}" href="#">{{folder.title}}</a><ul>
               {% assign foldercategory = folder.category %}
                {% for p in site.pages %}
                     {% for pagecategory in p.category %}
                        {% if foldercategory == pagecategory %}
                            {% if page.url == p.url %}
                            <li class="active"><a href="{{ p.url | remove: "/" }}">{{p.title}}</a></li>
                            {% else %}
                            <li><a href="{{ p.url | remove: "/" }}">{{p.title}}</a></li>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endfor %}
                </ul></li>
        {% endfor %}
    {% endfor %}
</ul>


<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>
